class jst{static version(){return"5.0.0-beta"}static themeAttribute="data-bs-theme";static run(t){"complete"===document.readyState?t():window.addEventListener("load",()=>t())}static runLater(t,e){let s=1e3*t,i=e;jst.run(()=>setTimeout(i,s))}static click(e,s){jst.run(()=>{var t;Array.isArray(e)?e=e[0]:"string"==typeof e&&(t="#"===e[0]?e.substring(1):e,e=document.getElementById(t)),null!=e&&e.addEventListener("click",t=>s(t))})}static isDef=t=>void 0!==t;static isUndef=t=>void 0===t;static isStr=t=>!(!t||0===t.length);static isDomEle=t=>0!==$(t).length;static eleById(t,e=document){return"string"!=typeof t?t:(t="#"===t[0]?t.substring(1):t,e.getElementById(t))}static setProperty(t,e,s){t.hasOwnProperty(e)||(t[e]=s)}static id(e,s=null){if(jst.isDomEle(e)){let t=$(e).attr("id");return jst.isUndef(t)&&null!==s&&($(e).attr("id",s),t=s),t}if("string"==typeof e)return e.startsWith("#")?e.substring(1):e;throw new Error('Id must be one of the following types: dom element, id string with/without "#"')}static random=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;static sleep(t){for(t=(new Date).valueOf()+1e3*t;;)if((new Date).valueOf()>=t)break}static getChildOf=(t,e)=>$(e).find(""+t)[0];static getChildrenOf=(t,e)=>$(e).find(""+t).children();static queryParam(t,e=null,s=null){s=s||document.location;s=new URL(s).searchParams.get(t);return null!=s?s:e}static uniqueId(){return""+Date.now().toString()+this.random(1,1e3)}static switchCls(t,e,s){t?$(s).addClass(e):$(s).removeClass(e)}static percentToPx(t,e="x"){return(t=parseFloat((""+t).replace("%","")))*(.01*("x"===e?window.innerWidth:window.innerHeight))}static pxToPercent(t,e="x"){return(t=parseFloat((""+t).replace("px","")))/(.01*("x"===e?window.innerWidth:window.innerHeight))}static _updateProperties(){window.log=t=>console.log(t),window.warn=t=>console.warn(t),window.err=t=>console.error(t),window.info=t=>console.info(t),Object.defineProperty(Array.prototype,"isEmpty",{value:function(){return 0===this.length},writable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"peek",{value:function(){return this?.[this.length-1]},writable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"owns",{value:function(t){if(void 0===t)throw new Error("Key can't be undefined.");return-1!==this.indexOf(t)},writable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"missing",{value:function(t){if(void 0===t)throw new Error("Key can't be undefined.");return-1===this.indexOf(t)},writable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"erase",{value:function(t){var e,t=this.indexOf(t);return t<0?null:(e=this[t],this.splice(t,1),e)},writable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"eraseAt",{value:function(t){var e;return"number"!=typeof t||t<0?null:(e=this[t],this.splice(t,1),e)},writable:!1,configurable:!1}),Object.defineProperty(Object.prototype,"owns",{value:function(t){if(void 0===t)throw new Error("Key can't be undefined.");return this.hasOwnProperty(t)},writable:!1,configurable:!1}),Object.defineProperty(Object.prototype,"missing",{value:function(t){if(void 0===t)throw new Error("Key can't be undefined.");return!this.owns(t)},writable:!1,configurable:!1}),Object.defineProperty(Object.prototype,"erase",{value:function(t){var e={key:t,value:this[t]};return delete this[t],e},writable:!1,configurable:!1}),Object.defineProperty(String.prototype,"capitalize",{value:function(t=!1){return(t?this.toLowerCase():this).replace(/(?:^|\s|["'([{])+\S/g,t=>t.toUpperCase())}}),Object.defineProperty(String.prototype,"isEmpty",{value:function(){return 0===this.length}})}static modal(t,e={}){var s=JstOverlay.getPopup(t);return s||new JstModal(t,e)}static alert(t,e={}){return new JstAlert(t,e)}static shuffle=e=>{for(let t=e.length-1;0<t;t--){var s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}}jst._updateProperties();class JstActiveNav{#navId;#nav;#slidingSpeed;constructor(t,e=250){this.#navId=t,this.#nav=$("#"+this.#navId),this.#slidingSpeed=e,$(`#${this.#navId} .jst-nav-cat-header`).click(t=>this.#slideToggle(t))}toggleArrowIcon=(t,e)=>{t?$(e).text("keyboard_arrow_up"):$(e).text("keyboard_arrow_right")};#slideToggle(t){let s=this;t=$(t.currentTarget);let e=t.parent();var i=e.parent(),a=t.next();let r=t.find(".jst-nav-cat-arrow");t=$(e).hasClass("jst-nav-cat-expanded"),i=i.find(".jst-nav-cat.jst-nav-cat-expanded");i.each(function(){let e=this;$(this).find(".jst-nav-link-group").slideUp(s.#slidingSpeed,function(){var t=$(e).find(".jst-nav-cat-arrow");s.toggleArrowIcon(!1,t)})}),i.removeClass("jst-nav-cat-expanded"),t||a.slideDown(this.#slidingSpeed,()=>{e.addClass("jst-nav-cat-expanded"),s.toggleArrowIcon(!0,r)})}find(t=""){var e,s;(t=t.trim()).isEmpty()&&(t=new URL(window.location).pathname);let i;for(e of $(`#${this.#navId} a`)){var a=new URL(e.href).pathname;if(t.includes(a)){i=e;break}}i&&((i=$(i)).addClass("jst-nav-act-link"),s=this.#discoverActiveRouteUp(i),this.#slideDownLinkGroup(s))}#slideDownLinkGroup(t){let e=this;t.children(".jst-nav-link-group").slideDown(this.#slidingSpeed,function(){var t=$(this).prev().children(".jst-nav-cat-arrow"),t=(e.toggleArrowIcon(!0,t),$(this).children(".jst-nav-cat.jst-nav-cat-expanded"));0!==t.length&&e.#slideDownLinkGroup(t)})}#discoverActiveRouteUp(t){t=t.closest(".jst-nav-cat");return 1===t.length&&t.addClass("jst-nav-cat-expanded"),t.parent().attr("id")===this.#navId?t:this.#discoverActiveRouteUp(t.parent())}}class JstAlert{#id;#selfId;#option;#dismissed=!1;#closeIcon;#alertDom;#msgEle;#titleEle;#btnYes;#btnNo;#btnAck;#callbackAck=()=>!0;#callbackYes;#callbackNo;#callbackDismiss;#callbackShown;get id(){return this.#id}constructor(t,e={}){this.#id=t,this.#selfId="jst-alert-"+t,jst.setProperty(e,"title","One sec..."),jst.setProperty(e,"msg","A simple warning message here!"),jst.setProperty(e,"width",350),jst.setProperty(e,"height","auto"),jst.setProperty(e,"padding","1rem"),jst.setProperty(e,"cancelable",!0),jst.setProperty(e,"theme",JstOverlay.getTheme()),this.#option=e,jst.run(()=>{this.#injectDOM(),this.#prepare(),this.#updateCloseIcon(0),this.#updateTitle(),this.#updateMsg(),this.#setCloseIconListener(),this.#setBtnListener(),this.#applyTheme("dark"===this.#option.theme)})}#injectDOM(){var t=`
			<div class="jst-modal" id="${this.#selfId}">
				<div class="jst-modal-d-block">
					<div class="jst-modal-container" style="max-width: 75%; max-height: 75%;">
						<div class="jst-modal-header">
							<h4 id="jst-alert-title"></h4>
							<span class="jst-modal-icon-close" title="Close window"></span>
						</div>
						<div id="jst-alert-msg" class="jst-alert-msg"></div>
						<div class="jst-alert-btn-wrapper">
							<button id="jst-alert-btn-yes" class="jst-btn jst-btn-red">Yes</button>
							<button id="jst-alert-btn-no"  class="jst-btn jst-btn-dark">No</button>
							<button id="jst-alert-btn-ack" class="jst-btn jst-btn-teal">OK</button>
						</div>
					</div>
				</div>
			</div>
		`,t=($("body").prepend(t),this.#alertDom=$("#"+this.#selfId),this.#closeIcon=jst.getChildOf(".jst-modal-icon-close",this.#alertDom),this.#titleEle=jst.getChildOf("#jst-alert-title",this.#alertDom),this.#msgEle=jst.getChildOf("#jst-alert-msg",this.#alertDom),jst.getChildrenOf(".jst-alert-btn-wrapper",this.#alertDom));this.#btnYes=t[0],this.#btnNo=t[1],this.#btnAck=t[2]}#prepare(){this.#updateBtnVisibility();var t=jst.getChildOf(".jst-modal-container",this.#alertDom);$(t).css("width",this.#option.width),$(t).css("height",this.#option.height),$(this.#msgEle).css("padding",this.#option.padding)}#updateBtnVisibility(){this.#callbackYes||this.#callbackNo?($(this.#btnYes).show(),$(this.#btnNo).show(),$(this.#btnAck).hide()):($(this.#btnYes).hide(),$(this.#btnNo).hide(),$(this.#btnAck).show())}#updateCloseIcon(t=250){this.#option.cancelable?$(this.#closeIcon).fadeIn(t):$(this.#closeIcon).fadeOut(t)}#updateTitle(){var t=this.#option.title;$(this.#titleEle).html(t)}#updateMsg(){$(this.#msgEle).html(this.#option.msg)}#setCloseIconListener(){$(this.#closeIcon).on("click",()=>this.dismiss())}#setBtnListener(){$(this.#btnYes).on("click",()=>this.#dispatchBtnEvent(1)),$(this.#btnNo).on("click",()=>this.#dispatchBtnEvent(-1)),$(this.#btnAck).on("click",()=>this.#dispatchBtnEvent(0))}#applyTheme(t){t?this.#alertDom.addClass("jst-dark"):this.#alertDom.removeClass("jst-dark")}#show(){JstOverlay._acquire(this),$(this.#alertDom).fadeIn(250,()=>{this.#callbackShown?.(this.#msgEle)})}_handleEscape(){this.#option.cancelable&&this.dismiss()}isIFramedModal=()=>!1;getShowOverlay=()=>!0;getOpacity=()=>-1;show(){this.#dismissed?console.warn("Alert already dismissed"):JstOverlay.isReady()?jst.runLater(.05,()=>this.#show()):this.#show()}#dispatchBtnEvent(t){let e;0===t?e=this.#callbackAck?.()??!0:1===t?e=this.#callbackYes?.()??!0:this.#callbackNo&&(e=this.#callbackNo?.()??!0),e&&this.dismiss()}yes(t){return this.#callbackYes=t,this.#callbackAck=null,this.#updateBtnVisibility(),this}no(t){return this.#callbackNo=t,this.#callbackAck=null,this.#updateBtnVisibility(),this}acknowledge(t){return this.#callbackAck=t,this.#updateBtnVisibility(),this}onDismiss(t){return this.#callbackDismiss=t,this}onShown(t){return this.#callbackShown=t,this}dismiss(){this.#dismissed||(this.#dismissed=!0,JstOverlay._release(this),$(this.#alertDom).fadeOut(250,()=>{$(this.#alertDom).remove(),this.#callbackDismiss?.()}))}close(){this.dismiss()}setMsg(t){this.#option.msg=t,this.#updateMsg()}setTitle(t){this.#option.title=t,this.#updateTitle()}setTheme(t){this.#option.theme!==t&&(this.#option.theme=t,this.#applyTheme("dark"===t))}setCancelable(t){this.#option.cancelable=t,this.#updateCloseIcon()}hideChoice(t){let e;"yes"===t?e=this.#btnYes:"no"===t?e=this.#btnNo:"ok"===t&&(e=this.#btnAck),e&&$(e).fadeOut(250)}showChoice(t){let e;"yes"===t?e=this.#btnYes:"no"===t?e=this.#btnNo:"ok"===t&&(e=this.#btnAck),e&&$(e).fadeIn(250)}}(()=>{class r{#isAsync=!1;#resolve=null;#url;#segments=[];#timeout;#state;#status;#statusText;#headers={};#queryParam={};#dataSource={_raw_data:""};#reqData={};#formData=null;#keepASJSON=!1;#keepJSONKey=null;#response;#logResponse=!1;#logAsJson=!0;#callbackAny;#callbackOk;#callbackErr;#timeoutCallback;#unresolvedHost;#unknownError;#preRedirect;#postRun;#preRun;#anyPath;#successPath;#errorPath;#insDirAny=!1;#insDirOk=!1;#insDirErr=!1;#noToast=!1;#toastOnAny=!0;#autoHideToast=!0;#toastOnSuccess=!1;#toastOnError=!1;#delay=2;#hati=!1;#hatiMsg;#hatiStatus;#hatiLevel;static HATI_STATUS_SUCCESS=1;static HATI_STATUS_INFO=2;static HATI_STATUS_WARNING=0;static HATI_STATUS_ERROR=-1;static HATI_STATUS_UNKNOWN=-2;static HATI_LVL_SYSTEM=0;static HATI_LVL_USER=1;static HATI_LVL_UNKNOWN=-2;STATE_REQ_NOT_INITIALIZED=0;STATE_SERVER_CONNECTION_ESTABLISHED=1;STATE_REQ_RECEIVED=2;STATE_REQ_PROCESSING=3;STATE_REQ_FINISH_AND_READY=4;STATUS_OK=200;STATUS_FORBIDDEN=403;STATUS_PAGE_NOT_FOUND=404;static#contentType={form:"application/x-www-form-urlencoded",json:"application/json",raw:"text/plain"};constructor(){this.#timeout=3e4,this.#timeoutCallback=()=>{console.warn("Connection timed out")}}direct(t,e=!1){return this.#anyPath=t,this.#successPath=null,this.#errorPath=null,this.#insDirAny=e,this}directSuccess(t,e=!1){return this.#anyPath=null,this.#successPath=t,this.#insDirOk=e,this}directError(t,e=!1){return this.#anyPath=null,this.#errorPath=t,this.#insDirErr=e,this}onAny(t){return this.#callbackAny=t,this}onOk(t){return this.#callbackOk=t,this}onErr(t){return this.#callbackErr=t,this}preRun(t){return this.#preRun=t,this}postRun(t){return this.#postRun=t,this}preRedirect(t){return this.#preRedirect=t,this}onTimeout(t){return this.#timeoutCallback=t,this}onUnresolvedHost(t){return this.#unresolvedHost=t,this}onUnknownError(t){return this.#unknownError=t,this}withHati(){return this.#hati=!0,this}#callbackMediator(t){if(this.#response=t,this.#hati){try{this.#response=JSON.parse(t),this.#hatiMsg=this.#response.response.msg,this.#hatiStatus=this.#response.response.status,void 0!==this.#response.response.delay_time&&console.warn("Hati is running in development mode")}catch(t){return this.#resetHati(),console.error(`${this.#hatiMsg} ${t.message}.
Response: `+this.#response),void this.#invokeCallback(!1)}var t=this.#hatiStatus===r.HATI_STATUS_SUCCESS;this.#invokeRedirect(t),this.#invokeCallback(t),this.#noToast||(this.#autoHideToast?this.#toastOnAny?this.#showToast(t):this.#toastOnSuccess&&t?this.#showToast(!0):this.#toastOnError&&!t&&this.#showToast(!1):(JstToast.show(this.#hatiStatus,this.#hatiMsg,!1),this.#directAfterToast(t)))}else this.#noToast=!0,t=this.#status.toString()[0],t=!["4","5"].includes(t),this.#invokeRedirect(t),this.#invokeCallback(t)}#invokeRedirect(t){(this.#insDirAny||this.#noToast)&&this.#anyPath&&r.redirect(this.#anyPath),(this.#insDirOk||this.#noToast)&&t&&r.redirect(this.#successPath),!this.#insDirErr&&!this.#noToast||t||r.redirect(this.#errorPath)}#invokeCallback(t){null!=this.#callbackAny?this.#callbackAny(this.#decorateRes()):(t&&null!=this.#callbackOk&&this.#callbackOk(this.#decorateRes()),t||null==this.#callbackErr||this.#callbackErr(this.#decorateRes())),this.#postRun&&this.#postRun()}#decorateRes(){return{txt:this.responseRaw(),json:"object"==typeof(t=this.response())?t:null};var t}#resetHati(){this.#hatiStatus=r.HATI_STATUS_UNKNOWN,this.#hatiLevel=r.HATI_LVL_UNKNOWN,this.#hatiMsg="Server didn't talk Hatish."}#directAfterToast(t){this.#anyPath?this.#direct(this.#anyPath):t?this.#direct(this.#successPath):this.#direct(this.#errorPath)}#direct(t){this.#preRedirect&&this.#preRedirect(),r.redirect(t)}#showToast(t){JstToast.show(this.#hatiStatus,this.#hatiMsg,!0,()=>{this.#directAfterToast(t)},this.#delay)}#hit(t,e){if(t=t.toLowerCase(),!r.#contentType.owns(t))throw new Error("The argument 'as' must be one of these: form, json, raw");var s=this.#prepareUrl(),s=r.#removeExtraSign(s);this.#formData||this.header("Content-Type",r.#contentType[t]),["json","form"].owns(t)&&delete this.#dataSource._raw_data;let i;if(this.#formData){if(this.#keepASJSON)this.#formData.append(this.#keepJSONKey??"json",JSON.stringify(this.#dataSource));else for(var a in this.#dataSource)this.#formData.append(a,this.#dataSource[a]);i=this.#formData}else i="json"===t?JSON.stringify(this.#dataSource):"form"===t?r.parameterize(this.#dataSource):JSON.stringify(this.#dataSource._raw_data);this.#reqData=i,this.#preRun&&this.#preRun();t=$.ajax({url:s,method:e,crossDomain:!0,timeout:this.#timeout,contentType:!1,headers:this.#headers,data:i,xhrFields:{withCredentials:!0},processData:!1});t.done((t,e,s)=>{this.#handle(s,e)}),t.fail((t,e)=>{this.#handle(t,e)})}#handle(t,e){if(this.#state=t.readyState,this.#status=t.status,this.#statusText=e,this.#logResponse){e=t.responseText??"";if(0===e.length)console.info("Nothing to log");else if(this.#logAsJson)try{console.log(JSON.parse(e))}catch{console.log(e)}else console.log(e)}this.#status===this.STATUS_PAGE_NOT_FOUND?null!=this.#unresolvedHost&&this.#unresolvedHost():"timeout"===this.#statusText?null!=this.#timeoutCallback&&this.#timeoutCallback():this.#callbackMediator(t.responseText),this.#isAsync&&this.#resolve&&(this.#resolve(),this.#isAsync=!1,this.#resolve=null)}static#removeExtraSign(t){return t=(t=t.endsWith("&")?t.substring(0,t.length-1):t).endsWith("?")?t.substring(0,t.length-1):t}#prepareUrl(){let s=this.#url;return 0<this.#segments.length&&(s.endsWith("/")||(s+="/"),s+=this.#segments.join("/")),s+="?",Object.entries(this.#queryParam).forEach(([t,e])=>s+=t+`=${e}&`),s}stickyToast(){return this.#autoHideToast=!1,this}noToast(){return this.#noToast=!0,this}toastSuccess(){return this.#toastOnAny=!1,this.#toastOnSuccess=!0,this}toastError(){return this.#toastOnAny=!1,this.#toastOnError=!0,this}toastTime(t){return this.#delay=t,this}logResponse(t=!0){return this.#logResponse=!0,this.#logAsJson=t,this}timeout(t){return this.#timeout=t,this}get(t="form"){if(t=t.toLowerCase(),!["form","json"].owns(t))throw new Error("The argument as must be one of these: form, json");delete this.#dataSource._raw_data;let s=this.#prepareUrl();this.#reqData="",Object.entries(this.#dataSource).forEach(([t,e])=>{t+=`=${e}&`;this.#reqData+=t,s+=t}),s=r.#removeExtraSign(s),this.#reqData.endsWith("&")&&(this.#reqData=this.#reqData.substring(0,this.#reqData.length-1)),this.header("Content-Type",r.#contentType[t]),this.#preRun&&this.#preRun();t=$.ajax({url:s,method:"GET",crossDomain:!0,timeout:this.#timeout,contentType:!1,headers:this.#headers,xhrFields:{withCredentials:!0},processData:!1});t.done((t,e,s)=>{this.#handle(s,e)}),t.fail((t,e)=>{this.#handle(t,e)})}async getAsync(e="form"){return new Promise(t=>{this.#isAsync=!0,this.#resolve=t,this.get(e)})}post(t="form"){this.#hit(t,"POST")}postAsync(e="form"){return new Promise(t=>{this.#isAsync=!0,this.#resolve=t,this.#hit(e,"POST")})}put(t="json"){this.#hit(t,"PUT")}putAsync(e="json"){return new Promise(t=>{this.#isAsync=!0,this.#resolve=t,this.#hit(e,"PUT")})}delete(t="json"){this.#hit(t,"DELETE")}deleteAsync(e="json"){return new Promise(t=>{this.#isAsync=!0,this.#resolve=t,this.#hit(e,"DELETE")})}to(t){return this.#url=t,this}header(t,e){return this.#headers[t]=e,this}raw(t){if("object"==typeof t)throw new Error("Data of type Object can't be processed as raw data");return this.#dataSource._raw_data+=t,this}form(t){var e;if("string"==typeof t&&(e=t.startsWith("#")?t.substring(1):t,t=document.getElementById(e)),"object"==typeof t||$(t).is("form"))return $(t).serializeArray().forEach(t=>this.#dataSource[t.name]=t.value),this;throw new Error("Argument must be a form or an id to form")}json(e){return"string"==typeof e&&(e=JSON.parse(e)),Object.keys(e).forEach(t=>this.#dataSource[t]=e[t]),this}files(t){return this.#formData=t,this}sendDataSourceAsJSON(t="json"){return this.#keepJSONKey=t,this.#keepASJSON=!0,this}queryParam(t,e){return this.#queryParam[t]=e,this}segment(t){return this.#segments.push(t),this}get conStatus(){return this.#status}get conStatusTxt(){return this.#statusText}get msg(){return this.#hatiMsg}get status(){return this.#hatiStatus}get level(){return this.#hatiLevel}response(){if("null"===this.#response)return null;if("object"==typeof this.#response)return this.#response;try{return JSON.parse(this.#response)}catch{return null}}responseRaw(){return"object"==typeof this.#response?JSON.stringify(this.#response):this.#response}serverReplied(){return this.#state===this.STATE_REQ_FINISH_AND_READY&&this.#status===this.STATUS_OK}hatiResponse(){return this.serverReplied()&&this.#hatiLevel!==r.HATI_LVL_UNKNOWN}isOk(...t){var e=this.#status.toString()[0];return!["4","5"].includes(e)&&(!this.#hati||(t=0===t.length?[0,1,2]:t).includes[this.status])}isErr(){var t=this.#status.toString()[0];return!(!["4","5"].includes(t)||this.#hati&&-1!==this.status)}ifOk(t){this.isOk()&&t(this.#decorateRes())}ifErr(t){this.isErr()&&t(this.#decorateRes())}get reqData(){return this.#reqData}static parameterize(t){let e="";for(const s in t)e+=`${s}=${t[s]}&`;return e.substring(0,e.length-1)}static redirect(t){t&&(window.location=t)}}window.JstConnect=()=>new r,window.JstConnect.getUrl=(t,e="query",s=null)=>{return"query"===e?new URLSearchParams(window.location.search).get(t)??s:"path"===e?window.location.pathname.replace(/^\//,"").split("/")[parseInt(t,10)-1]??s:s},window.JstConnect.parameterize=t=>r.parameterize(t),window.JstConnect.redirect=t=>r.redirect(t)})();class JstFormInspector{static SAN_A=/[a-zA-Z]/g;static SAN_N=/[0-9]/g;static SAN_AN=/[a-zA-Z0-9]/g;static SAN_AS=/[a-zA-Z\s]/g;static SAN_AC=/[a-zA-Z,]/g;static SAN_AD=/[a-zA-Z.]/g;static SAN_ANS=/[a-zA-Z0-9\s]/g;static SAN_ASC=/[a-zA-Z\s,]/g;static SAN_AND=/[a-zA-Z0-9.]/g;static SAN_ANSC=/[a-zA-Z0-9\s,]/g;static SAN_ANSD=/[a-zA-Z0-9\s.]/g;static SAN_ANSCD=/[a-zA-Z0-9\s,.]/g;static SAN_ISO_DATE=/(\d{4}-\d{2}-\d{2})/g;static SAN_ISO_TIME=/(\d{2}:\d{2}:\d{2})/g;#option;#form;#fromUnauthorized=!1;#canSubmit=!0;#eleConfigArr=[];#iconOk="&#10004;";#iconErr="&#10060;";#validationConsumer;#validationHandler=(t,e)=>{var s,i,a,r,o;this.#option.resettingForm||(s=(e.owns("inline")?e:this.#option).inline,i=t?this.#iconOk:this.#iconErr,a=$(e.ele).next().hasClass("jst-form-msg"),r=e.owns("msgPos"),a&&!r||(a='<div class="jst-form-msg"><span></span> <span></span></div>',r?$("#"+e.msgPos).html(a):$(e.ele).after(a)),a=r?$("#"+e.msgPos):$(e.ele).next(),t&&this.#option.feedbackErrOnly?a.hide():(a.show(),o=(r=$(a).find("span"))[0],r=r[1],(e.owns("showIcon")?e:this.#option).showIcon&&$(o).html(i),(e.owns("showMsg")?e:this.#option).showMsg&&$(r).html(e.msg),o=t?"jst-form-msg-success":"jst-form-msg-error",$(a).removeClass("jst-form-msg-error jst-form-msg-success").addClass(o),$(a).css("display",s?"inline":"block")))};constructor(t,e={}){if(jst.setProperty(e,"inline",!1),jst.setProperty(e,"showIcon",!0),jst.setProperty(e,"showMsg",!0),jst.setProperty(e,"feedbackErrOnly",!1),e.firstSubmission=!0,this.#option=e,!$(t).is("form")&&"string"!=typeof t)throw new Error("Argument form must be an id or a reference to a form");if(this.#form=jst.eleById(t),jst.isUndef(this.#form)||null===this.#form)throw new Error("Failed to find the form");e=$(this.#form);e.submit(t=>{t.preventDefault(),this.validate()}),e.find('input[type="submit"]:not([data-jst-form-submitter]), button:not([data-jst-form-submitter])').click(()=>{this.#fromUnauthorized=!0}),e.find("input[data-jst-form-submitter], button[data-jst-form-submitter]").click(()=>{this.#fromUnauthorized=!1})}static#getEleName(t){if(t.owns("alias"))return t.alias;let e=t.id||t.name;return(e=e.replaceAll(/-/g," ")).capitalize(!0)}static#getValue(t){var e=$(t.ele).attr("type");return"radio"===e?$(`input[name="${t.name}"]:checked`).val():("checkbox"!==e||!!$(t.ele).is(":checked"))&&$(t.ele).val()}addRule(...t){(t=Array.isArray(t[0])?t[0]:t).forEach(t=>{let e=$(this.#form).find("#"+t.id)[0];jst.isUndef(e)&&t.owns("name")&&(e=$(this.#form).find(`[name=${t.name}]`)),jst.isUndef(e)?console.warn("Element with no identity(id/name) has been skipped"):(t.ele=e,t.ok=!1,t.lastCheckPassed=!0,t.key=t.id||t.name,t.msg=null,t.dirty=!1,this.#addListener(t),this.#eleConfigArr.push(t))})}resetForm(){this.#form?.reset(),this.#option.firstSubmission=!0,this.#option.resettingForm=!0;var e,s=$(this.#form);for(e of this.#eleConfigArr){e.ok=!1,e.msg=null,e.dirty=!1,e.lastCheckPassed=!0;let t;e.owns("msgPos")?t=$("#"+e.msgPos):e.owns("id")&&(t=s.find(`#${e.id} + .jst-form-msg`)),t?.css("display","none"),e.reset=!0,this.#validationHandler(null,e),delete e.reset}this.#option.resettingForm=!1}submit(){this.#fromUnauthorized||($(this.#form).off("submit"),$(this.#form).submit(),$(this.#form).on("submit"))}validate(t=!0){if(!this.#fromUnauthorized)return this.#canSubmit=!0,this.#eleConfigArr.forEach(t=>{jst.isUndef(t.ele)||(this.#filter(t),this.#canSubmit&&(this.#canSubmit=t.ok))}),this.#option.firstSubmission=!1,this.#canSubmit&&!t||(!this.#validationConsumer&&this.#canSubmit?this.submit():this.#validationConsumer?.(this.#canSubmit)),this.#canSubmit;this.#fromUnauthorized=!1}setFeedbackHandler=t=>{this.#validationHandler=t};#addListener(t){var e=t.ele,s=$(e).prop("nodeName").toLowerCase(),i=$(e).attr("type");$(e).on("blur",()=>{this.#filter(t),t.lastCheckPassed=t.ok}),"radio"===i||"checkbox"===i||"select"===s?$(e).change(()=>this.#filter(t)):$(e).keyup(()=>{t.lastCheckPassed||this.#filter(t)})}#filter=t=>{var e=$(t.ele).prop("nodeName").toLowerCase(),s=t.type,i=$(t.ele).attr("type");let a;"select"===e&&""===JstFormInspector.#getValue(t)?t.ok=this.#handleValidation(!1,t,"Required"):("email"===s||"email"===i?a=this.#email(t):"str"===s?a=this.#str(t):"int"===s?a=this.#int(t):"float"===s&&(a=this.#float(t)),a&&t.owns("pattern")&&(a=this.#pattern(t)),t.ok=a)};#email=t=>{var e=JstFormInspector.#getValue(t);return jst.isStr(e)?(e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),this.#handleValidation(e,t,e?"Email accepted":"Invalid email")):this.#handleValidation(!1,t,"Required")};#str=t=>{let e=JstFormInspector.#getValue(t);return jst.isStr(e)?(e=e.trim(),!!this.#checkLen(t,e)&&!!this.#checkInOption(t,e)&&this.#handleValidation(!0,t,JstFormInspector.#getEleName(t)+" accepted")):this.#handleValidation(!1,t,"Required")};#int=t=>{let e=JstFormInspector.#getValue(t);return jst.isStr(e)?0<e.replace(/[0-9]/g,"").length?this.#handleValidation(!1,t,"Invalid number"):(e=parseInt(e),Number.isSafeInteger(e)?!!this.#checkLen(t,e)&&!!this.#checkRange(t,e)&&!!this.#checkInOption(t,e)&&this.#handleValidation(!0,t,JstFormInspector.#getEleName(t)+" accepted"):this.#handleValidation(!1,t,"Must be an integer")):this.#handleValidation(!1,t,"Required")};#float=t=>{let e=JstFormInspector.#getValue(t);return jst.isStr(e)?(null==e.match(/\./g)&&(e+=".0"),0!==e.replaceAll(/-?\d+\.\d+/g,"").length?this.#handleValidation(!1,t,"Illegal input"):!!this.#checkLen(t,e)&&!!this.#checkRange(t,e)&&(t.owns("place")&&e.split(".")[1].length!==t.place?this.#handleValidation(!1,t,"Fractional place must be of "+t.place):!!this.#checkInOption(t,e)&&this.#handleValidation(!0,t,JstFormInspector.#getEleName(t)+" accepted"))):this.#handleValidation(!1,t,"Required")};#pattern=t=>{var e=JstFormInspector.#getValue(t);return jst.isStr(e)?0!==e.replaceAll(t.pattern,"").length?this.#handleValidation(!1,t,"Invalid input"):this.#handleValidation(!0,t,JstFormInspector.#getEleName(t)+" accepted"):this.#handleValidation(!1,t,"Required")};#checkLen(t,e){"string"!==(typeof e).toLowerCase()&&(e=String(e));var s=t.minLen||0,i=t.maxLen||-1;return e.length<s?this.#handleValidation(!1,t,`Must be ${s} in length`):!(-1!==i&&e.length>i)||this.#handleValidation(!1,t,"Exceeded maximum length of "+i)}#checkRange(t,e){var s=t.min||0,i=t.max||-1;return e<s?this.#handleValidation(!1,t,"Can't be less than "+s):!(-1!==i&&i<e)||this.#handleValidation(!1,t,"Can't be greater than "+i)}#checkInOption(t,e){let s=!1;if(!t.owns("option"))return!0;for(const a of t.option)if(a===e){s=!0;break}var i="checkbox"===$(t.ele).attr("type")?"Must be acknowledged":"Must be of valid options";return!!s||this.#handleValidation(!1,t,i)}#handleValidation(t,e,s){return t||e.dirty||(e.dirty=!0),t&&this.#option.firstSubmission&&!e.dirty||(!t&&e.msg!==s||(t||e.msg!==s)&&t&&e.dirty&&e.msg!==s)&&(e.msg=s,this.#validationHandler(t,e)),t}setIconOk(t){return this.#iconOk=t,this}setIconErr(t){return this.#iconErr=t,this}onValidate(t){this.#validationConsumer=t}getForm(){return this.#form}}(()=>{class d{#iconPool={};#apply(t,e,s){if(!(t=jst.eleById(t)))throw new Error("No icon element found for "+t);let i=$(t).attr("id");i||(i="jst-id-"+d.#getUId(),$(t).attr("id",i));var a={},t=(a.id=i,a.ele=t,a.innerHTML=t.innerHTML,$(t)),r=(a.padding=t.css("padding"),0===(s?.length??0)),s=r?"":"&nbsp;"+s,o=r?"":"jst-px-8",n=r?"jst-lay-center":"jst-lay-xs-yc jst-gap-4",r=r?`min-width: ${t.innerWidth()}px;`:"",h=t.innerHeight()+"px";let l;switch(e){case"spin":l="jst-anim-spin";break;case"spin-color":l="jst-anim-spin-color";break;default:l="jst-anim-pulse"}e=`
				<div class="${n} ${o}" style="${r} height: ${h};">
					<span class="jst-icon-swap ${l}"></span>${s}
				</div>
			`;return t.css("padding",0),t.empty().html(e),t.animate({opacity:.7}),t.attr("disabled","true"),this.#iconPool[i]=a}#getObj(t){if(!(t=jst.eleById(t)))throw new Error("No element found in the document as specified by the argument.");t=$(t).attr("id");if(!t)throw new Error("This element did not go through icon methods yet.");if(this.#iconPool.missing(t))throw new Error("This element was not found in the icon pool.");return this.#iconPool[t]}pulse(t,e=""){this.#apply(t,"pulse",e)}spin(t,e=""){this.#apply(t,"spin",e)}spinColor(t,e=""){this.#apply(t,"spin-color",e)}restore(t){var t=this.#getObj(t),e=$(t.ele);e.css("padding",t.padding),e.empty().html(t.innerHTML),e.animate({opacity:"1"}),e.removeAttr("disabled"),delete this.#iconPool[t.id]}disable(t){$(jst.eleById(t)).attr("disabled","true")}enable(t){$(jst.eleById(t)).removeAttr("disabled")}static#getUId=()=>(new Date).valueOf()}window.JstIcon=new d})();class JstModal{#id;#option;#runSetupFn=!0;#initialized=!1;#hidden=!1;#firstBoot=!0;#modal=null;#topicCallback={};#injectDataId;constructor(t,e={}){this.#id=t,jst.setProperty(e,"title","jst-Modal"),jst.setProperty(e,"width","100%"),jst.setProperty(e,"height","100%"),jst.setProperty(e,"padding","1rem"),jst.setProperty(e,"cancelable",!0),jst.setProperty(e,"overlay",!0),jst.setProperty(e,"decorated",!0),jst.setProperty(e,"showCloseIcon",!0),jst.setProperty(e,"theme",JstOverlay.getTheme()),jst.setProperty(e,"opacity",-1),jst.setProperty(e,"url",null),jst.setProperty(e,"reusable",!e.url),jst.setProperty(e,"showLoaderText",!0),jst.setProperty(e,"loaderText","Loading..."),jst.setProperty(e,"injectData",null),this.#option=e,JstOverlay._cacheClient(this),this.isIFramedModal()&&JstOverlay.hasParent()||this.#init()}#init(){this.#injectDOM(),this.#attachCloseIconListener(),this.#adjustModalSize(),this.#updateCloseIcon(),this.#applyTheme("dark"===this.#option.theme),this.#initialized=!0}#injectDOM(){let t;var e;t=this.#option.url?this.#iframeModal():this.#pageContentModal(),$(this.#modal).find(".jst-modal-content").css("padding",this.#option.padding),!this.#option.url&&this.#option.decorated?(e=`
				<div class="jst-modal-header">
					<h4 class="jst-modal-title">${this.#option.title}</h4>
					<span class="jst-modal-icon-close" title="Close"></span>
				</div>
            `,$(t).prepend(e)):this.#option.showCloseIcon&&$(t).prepend(`
				<div class="jst-modal-header-less">
					<span class="jst-modal-icon-close" title="Close"></span>
				</div>
			`)}#iframeModal(){var t="dark"===this.#option.theme?"jst-dark":"",e=this.#option.showLoaderText?`<h4 class="jst-modal-loader-label">${this.#option.loaderText}</h4>`:"",s=JstOverlay.hasParent()?"jst-modal-iframe-overlay-bg":"";let i="";this.#option.injectData&&this.#option.url&&(this.#injectDataId=jst.uniqueId(),i=`data-data-id="${this.#injectDataId}"`,JstOverlay._setClientData(this.#injectDataId,this.#option.injectData));s=`
			<div class="jst-modal" id="${this.#id}">
				<div class="jst-modal-d-block ${s}">
					<div class="jst-modal-loader-wrapper" style="width: ${this.#option.width}; height: ${this.#option.height}">
						<div class="jst-modal-loader"></div>
						${e}
					</div>
	
					<div class="jst-modal-iframe-overlay-bg"></div>
					
					<div class="jst-modal-container" style="display: none;">
						<iframe ${i}
								id="${this.#id}-frame"
								style="z-index: 1;"
								src="${this.#option.url}">
						</iframe>
						
						<script>
							(() => {
								const iframe = document.getElementById('${this.#id}-frame');
								
								const loaderDiv = $(iframe).parent().prev().prev();
								loaderDiv.css({
									width: '${this.#option.width}',
									height: '${this.#option.height}'
								});
								
								iframe.addEventListener('load', () => {
									let iDoc = iframe.contentDocument || iframe.contentWindow.document;
								
									// Append theme class to the iframe body so that client can apply colors correcntly
									$(iDoc.body).addClass('${t}');
									
									/*
									 * Set first boot flag to false and then invoke onResume method!
									 */
									const parent = window.parent.JstOverlay.getPopup('${this.#id}');
									parent?.onResume(true);
									
									// Fade-out the loader
									$(loaderDiv).fadeOut(250, () => {
										// Show the iframe body
										$(iframe).parent().fadeIn(250);
										
										parent?.onShown(true);
										parent?._setFirstBootComplete();
									});
									
									$(iDoc).on('keydown', (e) => {
										let keyboard = e.type === 'keydown' && e.key === 'Escape';
										if (!keyboard) return;
										
										JstOverlay._handleEscapeEvent(e);
									});
								});
							})();
						</script>
					</div>
				</div>
			</div>
		`;return $("body").append(s),this.#modal=$("#"+this.#id),jst.getChildOf(".jst-modal-container",this.#modal)}#pageContentModal(){this.#modal=$(jst.eleById(this.#id));var t=`
			<div class="jst-modal-d-block">
				<div class="jst-modal-container">
					<div class="jst-modal-content" id="${this.#id}-content"></div>
				</div>
			</div>
		`;return $($(this.#modal).contents()).wrapAll(t),jst.getChildOf(".jst-modal-container",this.#modal)}#attachCloseIconListener(){var t=jst.getChildOf(".jst-modal-icon-close",this.#modal);$(t).click(()=>this.close())}#adjustModalSize(){var t=jst.getChildOf(".jst-modal-container",this.#modal);$(t).css({width:this.#option.width,height:this.#option.height})}#updateCloseIcon(){var t=jst.getChildOf(".jst-modal-icon-close",this.#modal),t=$(t),t=(this.#option.showCloseIcon?$(t).fadeIn(250):$(t).fadeOut(250),jst.getChildOf(".jst-modal-content",this.#modal)),t=$(t);this.#option.decorated?$(t).css({position:"initial"}):$(t).css({position:"absolute",top:0,left:0,right:0,bottom:0})}#applyTheme(t){t?this.#modal.addClass("jst-dark"):this.#modal.removeClass("jst-dark"),this.isIFramedModal()&&(t?$(this.getIframeBody()).addClass("jst-dark"):$(this.getIframeBody()).removeClass("jst-dark"))}#updateTitle(){var t=jst.getChildOf(".jst-modal-title",this.#modal);$(t).html(this.#option.title)}#show(){var t,e;JstOverlay._acquire(this)&&(t=this.isIFramedModal()&&!this.#firstBoot,e=!this.isIFramedModal(),(t||e)&&this.onResume(this.#firstBoot),$(this.#modal).fadeIn(250,()=>{this.isIFramedModal()&&this.#firstBoot||(this.onShown(this.#firstBoot),this.#firstBoot&&(this.#firstBoot=!1))}),this.#hidden=!1)}_setFirstBootComplete(){this.#firstBoot=!1}_handleEscape(){this.#option.cancelable&&this.close()}_makeVisible(){this.#hidden=!1,this.onResume(!1),$(this.#modal).fadeIn(250,()=>this.onShown(!1))}_hide(){this.#hidden?warn("Visible popups must be closed first"):(this.#hidden=!0,$(this.#modal).fadeOut(250,()=>this.onHidden()))}_prepareForIframe(t){var e;this.isIFramedModal()&&(e=jst.getChildOf(`#${this.#id}-frame`,this.#modal),$(e.contentDocument.body).css("overflow",t?"auto":"hidden"),e=$(this.#modal).find(".jst-modal-header-less"),t?$(e).fadeIn(250):$(e).fadeOut(250))}show(){if(this.isIFramedModal()&&JstOverlay.hasParent()){if(!(window.parent.JstOverlay.getTopClient()?.onHide()??!0))return this;this.#initialized||this.#init()}if(this.#initialized)return JstOverlay.isReady()?this.#show():jst.runLater(.05,()=>this.#show()),this;throw new Error(`Modal #${this.#id} must have been initialized before it can be shown`)}close(){this.#hidden?warn("Attempted to close hidden model #"+this.id):(this.onClose()??!0)&&(JstOverlay._release(this),$(this.#modal).fadeOut(250,()=>{this.onClosed(),this.isIFramedModal()&&!this.isReusable()&&(this.#modal.remove(),this.#option.data)&&this.#option.url&&JstOverlay._deleteClientData(this.#injectDataId)}))}get id(){return this.#id}onClose(){return!0}onClosed(){}onHide(){return!0}onHidden(){}onResume(t){}onShown(t){}setTheme(t){this.#option.theme!==t&&(this.#option.theme=t,this.#applyTheme("dark"===t))}isShown(){return!this.#hidden}getShowOverlay(){return this.#option.overlay}getOpacity(){return this.#option.opacity}isCancelable(){return this.#option.cancelable}setSize(t,e){this.#option.width=t,this.#option.height=e,this.#adjustModalSize()}setWidth(t){this.#option.width=t,this.#adjustModalSize()}setHeight(t){this.#option.height=t,this.#adjustModalSize()}setTitle(t){this.#option.title=t,this.#updateTitle()}setCancelable(t){this.#option.cancelable=t,this.#updateCloseIcon()}setShowCloseIcon(t){this.#option.showCloseIcon=t,this.#updateCloseIcon()}getShowCloseIcon(){return this.#option.showCloseIcon}isIFramedModal(){return null!=this.#option.url}setup(t){return this.#runSetupFn&&(this.#runSetupFn=!1,t(this)),this}subscribeEvent(t,e){return this.#topicCallback.owns(t)?console.warn(`Topic ${t} has already been subscribed`):this.#topicCallback[t]=JstOverlay.subscribeEvent(t,e),this}unsubscribeEvent(t){return this.#topicCallback.owns(t)?(delete this.#topicCallback[t],JstOverlay.unsubscribeEvent(this.#topicCallback[t])):(console.warn(`Unknown topic ${t} can't be unsubscribed`),!1)}getTopicId(t){return this.#topicCallback[t]??null}emmitEvent(t,e){JstOverlay.emitEvent(t,e)}getIframeBody(){return document.getElementById(this.#id+"-frame")?.contentDocument.body??null}isReusable(){return!this.#option.url||this.#option.reusable}}class JstNum{static MONEY_BD="৳";static MONEY_GBP="£";static MONEY_USD="$";static format(t,e="",s=!1,i=2,a=!0){let r=parseFloat(t);if(isNaN(r))return"0-0";var t=Number.isSafeInteger(r),o=r<0,o=(r=o?Math.abs(r):r,o?"-":"");o+=0===e.length?"":e;let[n,h]=(r=t?r.toString():r.toFixed(i)).split(".");return a&&(n=n.replace(/\B(?=(\d{3})+(?!\d))/g,",")),r=h?n+"."+h:n,o+(r=s?this.lead0(r):r)}static moneyToNum(t,e=JstNum.MONEY_GBP){return t=String(t),parseFloat(t.replace(e,""))}static lead0(t){return t<10?"0"+t:t}static bdNum(t){var e,s={0:"০",1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯"};let i="";for(e of t.toString())i+=s[e]??e;return i}static bdOrdinal(t){var e={1:"প্রথম",2:"দ্বিতীয়",3:"তৃতীয়",4:"চতুর্থ",5:"পঞ্চম",6:"ষষ্ঠ",7:"সপ্তম",8:"অষ্টম",9:"নবম",10:"দশম"};return e[t="string"==typeof t?parseInt(t,10):t]||(10<t?this.bdNum(t)+"তম":"০")}}window.JstOverlay=new class{#theme;#childOverlay=null;#clientList=[];#reusableClientList={};#injectedData={};#ready=!1;#overlay;#topicClientMap={};constructor(){jst.run(()=>{this.#theme=JstTheme.isDark()?"dark":"light",document.getElementById("jst-overlay")||($("body").prepend('<div id="jst-overlay" class="jst-overlay"></div>'),this.#overlay=$("#jst-overlay"),$(document).on("keydown click",this.#overlay,t=>this._handleEscapeEvent(t)),this.#overlay.hide(),this.#ready=!0)})}_handleEscapeEvent(t,e=!1){var s,i;this.#childOverlay?this.#childOverlay._handleEscapeEvent(t,!0):(s="keydown"===t.type&&"Escape"===t.key,i="click"===t.type&&$(t.target).hasClass("jst-modal-d-block"),(e||s||i)&&this.#clientList.peek()?._handleEscape(t))}#update(){var t;this.#clientList.isEmpty()?jst.runLater(.075,()=>{var t;this.#clientList.isEmpty()?(this.#hideOverlay(),window.parent.JstOverlay._unsetChildOM()):(t=this.#clientList.peek(),this.#updateOverlay(t),t._makeVisible())}):(t=this.#clientList.peek(),this.#updateOverlay(t),t._makeVisible())}_acquire(t){this.#clientList.isEmpty()&&this.hasParent()&&window.parent.JstOverlay._setChildOM(this);let e;t.isIFramedModal()&&this.hasParent()&&(e=window.parent.JstOverlay.getTopClient());var s=this.#clientList.peek();return!!((t instanceof JstAlert||s?.onHide())??!0)&&(this.clientList.push(t),e?.onHidden(),s?._hide(),this.#updateOverlay(t),!0)}_release(t){return this.clientList.peek()?.id===t.id&&this.#clientList.pop(),this.#update(),!0}hasParent(){return window!==window.parent}#getOpacity(){let t=this.#clientList.peek().getOpacity();return t=-1===t?"dark"===this.#theme?.85:.5:t}#showOverlay(){this.#overlay.css("opacity",this.#getOpacity()),"block"!==this.#overlay.css("display")&&$(this.#overlay).fadeIn(250)}#hideOverlay(){$(this.#overlay).fadeOut(250)}#updateOverlay(t){t.getShowOverlay()?this.#showOverlay():t.getShowOverlay()||this.#hideOverlay()}_cacheClient(t){!(!t.isIFramedModal()||t.isIFramedModal()&&t.isReusable())||this.#reusableClientList.owns(t.id)||(this.#reusableClientList[t.id]=t)}_setChildOM(t){null===this.#childOverlay&&(this.#childOverlay=t,this._prepareParent())}_unsetChildOM(){this._restoreParent(),this.#childOverlay=null}_prepareParent(){var t=this.#clientList.peek();t.isIFramedModal()&&t._prepareForIframe(!1)}_restoreParent(){this.#clientList.peek()?._prepareForIframe(!0)}_setClientData(t,e){this.hasParent()?window.parent.JstOverlay._setClientData(t,e):this.#injectedData[t]=e}_deleteClientData(t){this.hasParent()?window.parent.JstOverlay._deleteClientData(t):delete this.#injectedData[t]}_getClientData(t){return this.hasParent()?window.parent.JstOverlay._getClientData(t):this.#injectedData[t]??{}}subscribeEvent(t,e){var s=jst.uniqueId();return this.#topicClientMap.owns(t)||(this.#topicClientMap[t]={}),this.#topicClientMap[t][s]=e,s}unsubscribeEvent(t){for(var e in this.#topicClientMap){e=this.#topicClientMap[e];if(e.hasOwnProperty(t))return delete e[t],!0}return!1}emitEvent(t,e){var s=this.#topicClientMap[t]??null;let i=!0;if(s)for(var a in s)if(!s[a](e)){i=!1;break}i&&this.hasParent()&&window.parent.JstOverlay.emitEvent(t,e)}getTopClient(){return this.#clientList.peek()}setTheme(e){var t="dark"===(this.#theme=e),s=$(".jst-overlay");jst.switchCls(t,"jst-overlay-dark",s),this.#clientList.forEach(t=>t.setTheme(e));for(const i in this.#reusableClientList)this.#reusableClientList[i].setTheme(e);this.#childOverlay?.setTheme(e)}getTheme(){return this.hasParent()?window.parent.JstOverlay.getTheme():this.#theme}isUp(t){return this.#clientList.peek()?.id===t}isReady(){return this.#ready}get clientList(){return this.#clientList}getPopup(e){var t=this.#reusableClientList?.[e];if(t)return t;for(let t=0;t<this.#clientList.length;t++){var s=this.#clientList[t];if(s.id===e)return s}return null}},window.subscribeEvent=(t,e)=>window.JstOverlay.subscribeEvent(t,e),window.unsubscribeEvent=t=>window.JstOverlay.unsubscribeEvent(t),window.getPopup=t=>window.JstOverlay.getPopup(t),window.closePopup=()=>{var t=window.JstOverlay;t.clientList.isEmpty()&&t.hasParent()?window.parent.closePopup():t.clientList.peek()?.close()},window.getClientData=()=>{var t=window.frameElement?.getAttribute("data-data-id")??null;return t?window.JstOverlay._getClientData(t):{}};class JstStorage{static set(t,e){localStorage.setItem(t,e)}static unset(t){localStorage.removeItem(t)}static bool(t,e){return Boolean(localStorage.getItem(t))??e}static str(t,e){return localStorage.getItem(t)??e}static int(t,e){t=localStorage.getItem(t)??e,t=parseInt(t);return isNaN(t)?e:t}static float(t,e){t=localStorage.getItem(t)??e,t=parseFloat(t);return isNaN(t)?e:t}static setCookie(t,e,s=365){var i=new Date,s=(i.setTime(i.getTime()+24*s*60*60*1e3),"expires="+i.toUTCString());document.cookie=t+"="+e+";"+s+";SameSite=Lax; path=/"}static unsetCookie(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;SameSite=Lax"}static cookieBool(t,e){t=JstStorage.cookieStr(t,null);return null==t?e:"true"===t}static cookieInt(t,e){return parseInt(JstStorage.cookieStr(t,e))}static cookieFloat(t,e){return parseFloat(JstStorage.cookieStr(t,e))}static cookieStr(t,e){var s=t+"=",i=decodeURIComponent(document.cookie).split(";");for(let e=0;e<i.length;e++){let t=i[e];for(;" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(s))return t.substring(s.length,t.length)}return e}}class JstTable{#id;#table;#filterBy=-1;#sort="desc";#lastSortedIcon=null;#lastSortedCol=null;constructor(t){this.#id=t,this.#table=$("#"+t),this.#hookFilterListener(),this.#loadFilter(),this.#hookSortListener()}#hookSortListener(){let s=this;$(`#${this.#id} .jst-table-col-icon-sort`).click(function(){s.#lastSortedIcon=this,s.#sort="asc"===s.#sort?"desc":"asc";var t="desc"===s.#sort?"rotate(0deg) scaleX(1)":"rotate(180deg) scaleX(-1)",t=($(this).css("transform",t),this.parentElement),e=($(t).toggleClass("jst-table-col-icon-sort-show",!0),s.#lastSortedCol!==t&&$(s.#lastSortedCol).removeClass("jst-table-col-icon-sort-show"),s.#lastSortedCol=t,s.#table.find("tbody tr").toArray());let a=$(t).index(),r="asc"!==s.#sort;e.sort(function(t,e){let s=$(t).children("td").eq(a).text().trim(),i=$(e).children("td").eq(a).text().trim();return["৳","£","$"].includes(s[0])&&(s=s.replace(/[৳£$,]/g,"")),["৳","£","$"].includes(i[0])&&(i=i.replace(/[৳£$,]/g,"")),$.isNumeric(s)&&$.isNumeric(i)?r?i-s:s-i:r?i.localeCompare(s):s.localeCompare(i)}),$.each(e,function(t,e){s.#table.children("tbody").append(e)})})}#getColumnIndex(e){let s=-1;return $(`#${this.#id} th .jst-table-col-label`).each(function(t){if($(this).text().toLowerCase().trim()===e.trim().toLowerCase())return s=t,!1}),s}#loadFilter(){let t=localStorage.getItem("jst_tab_filter_by_"+this.#id)??null;var e;$(`#${this.#id}-filter input`).prop("disabled",!t),t&&(this.#filterBy=this.#getColumnIndex(t),-1===this.#filterBy||(e=$(`#${this.#id}-filter select option`).filter(function(){return $(this).val().toLowerCase()===t})).length<=0||$(`#${this.#id}-filter select`).val(e.val()))}#hookFilterListener(){var t=`#${this.#id}-filter`;let e=$(t+" input"),i=this;$(t+" select").change(t=>{t=t.target.value?.toLowerCase().trim();e.prop("disabled",!t),this.#filterBy=this.#getColumnIndex(t),localStorage.setItem("jst_tab_filter_by_"+this.#id,t)}),e.keyup(function(){let s=i.#filterBy;if(-1!==s){let e=$(this).val()?.trim().toLowerCase();$(i.#table).find("tbody tr").filter(function(){var t=$($(this).find("td")[s]).text().trim().toLowerCase();$(this).toggle(t.includes(e))})}})}}window.JstTheme=new class{#listeners=[];constructor(){jst.run(()=>{var t=getComputedStyle(document.documentElement).getPropertyValue("--jst-theme-attr");t&&(jst.themeAttribute=t);let e={attributes:!0,attributeFilter:[t]};let s=new MutationObserver(t=>{var e,s=this.isDark()?"dark":"light";JstStorage.setCookie("theme",s);for(e of t)"attributes"===e.type&&this.#listeners.forEach(t=>t(this.isLight()));JstOverlay.setTheme(s)});$(document).ready(()=>s.observe($("body")[0],e))})}listenChange(t){this.#listeners.push(t)}isDark(){return"dark"===document.body.getAttribute(jst.themeAttribute)?.toLowerCase()}isLight(){return!this.isDark()}toggle(t=null){this.#setTransitionEffect(),null===t&&(t=this.isDark()?"light":"dark"),document.body.setAttribute(jst.themeAttribute,t),JstStorage.setCookie("theme",t),jst.runLater(2,this.#removeTransitionEffect)}load(){var t=JstStorage.cookieStr("theme","dark");document.body.getAttribute(jst.themeAttribute)?.toLowerCase()!==t&&this.toggle(t)}#setTransitionEffect(){var t=document.createElement("style");t.id="dynamicTransition",t.innerHTML="* { transition: background 600ms !important; }",document.head.appendChild(t)}#removeTransitionEffect(){var t=document.querySelector("#dynamicTransition");t&&t.parentNode.removeChild(t)}},(()=>{class a{#toastMsg="A sweet and delicious toast to eat! 😎";ERROR=-1;WARNING=0;SUCCESS=1;INFO=2;#delay;#injected=!1;#toast;#icon;#msg;#guide;#bar;#autoHide;#callback;error(t,e=!0,s=null,i=3){this.show(this.ERROR,t,e,s,i)}warning(t,e=!0,s=null,i=3){this.show(this.WARNING,t,e,s,i)}success(t,e=!0,s=null,i=3){this.show(this.SUCCESS,t,e,s,i)}info(t,e=!0,s=null,i=3){this.show(this.INFO,t,e,s,i)}show(t,e,s=!0,i=null,a=3){this.#stopAnimation(),this.#toastMsg=e,this.#autoHide=s,this.#callback=i,this.#delay=a,this.#injectDOM(),$(this.#bar).hide(),this.#removeListener(),this.#autoHide&&this.#addListener(),this.#setup(t),this.#autoHide&&($(this.#bar).show(),this.#startAnimation())}#setup(t){this.hide(),this.#decorate(t),$(this.#toast).show().animate({right:0},750,"swing")}#addListener(){$(this.#toast).on("mouseenter",()=>{this.#stopAnimation()}),$(this.#toast).on("mouseleave",()=>{this.#startAnimation()})}#removeListener(){$(this.#toast).off("mouseenter, mouseleave")}#startAnimation(){$(this.#bar).css("width","0"),$(this.#bar).delay(750).animate({width:"100%"},1e3*this.#delay,"linear",()=>{$(this.#toast).delay(2e3).animate({right:"-360px"},1e3,"swing"),null!=this.#callback&&this.#callback()})}#stopAnimation(){$(this.#bar).stop()}#injectDOM(){this.#injected||($("body").append(`
                <div id="toast" style="display: none; overflow: clip; position: fixed; right: -360px; bottom: 32px; min-width: 280px; max-width: 360px; font-size: 0.98em; line-height: 1.15em; box-shadow: 1px 1px 2px black; z-index: 100000; border-radius: 0.25rem 0 0 0.25rem;">
                    <div style="display: flex; padding: 16px; align-items: center;">
                        <span id="toast-icon" style="user-select: none; margin-right: 12px; font-size: 24px;">&#128073;</span>
                        <span id="toast-msg" style="line-height: 1.25;">A sweet and delicious toast to eat!😎😉</span>
                    </div>
                    <div id="toast-pro-bar-guide">
                        <div id="toast-pro-bar" style="display: none; width: 100%; height: 1px; margin: 0 0; padding: 2px; background-color: #0B5ED7;"></div>                
                    </div>
                </div>
            `),this.#toast=$("#toast"),this.#icon=$("#toast-icon"),this.#msg=$("#toast-msg"),this.#guide=$("#toast-pro-bar-guide"),this.#bar=$("#toast-pro-bar"),this.#injected=!0)}#decorate(t){$(this.#msg).text(this.#toastMsg);let e={color:"#0f5132",bg:"#d1e7dd",guide:"#009A68",bar:"#52C400",icon:"&#9989;"},s={color:"#084298",bg:"#CFF4FC",guide:"#0a95b1",bar:"#0DCAF0",icon:"&#128172;"},i={color:"#664d03",bg:"#fff3cd",guide:"#937005",bar:"#FFCA2C",icon:"&#128721;"},a={color:"#842029",bg:"#f8d7da",guide:"#7A1E27",bar:"#DB3948",icon:"&#9940;"},r;r=t===this.SUCCESS?e:t===this.WARNING?i:t===this.ERROR?a:s,$(this.#toast).css("color",r.color),$(this.#toast).css("background-color",r.bg),$(this.#icon).html(r.icon),$(this.#guide).css("background-color",r.guide),$(this.#bar).css("background-color",r.bar)}hide(){$(this.#toast).css("right","-360px")}}window.JstToast=new a,window.JstToast.loadToast=(t,e=window.JstToast.SUCCESS,s=!0,i=3)=>{JstStorage.setCookie("toast_msg",t),JstStorage.setCookie("toast_type",e),JstStorage.setCookie("toast_auto_hide",s),JstStorage.setCookie("toast_delay",i)},jst.run(()=>{var t,e,s,i=JstStorage.cookieStr("toast_msg","");0!==i.length&&(t=JstStorage.cookieInt("toast_type",a.INFO),e=JstStorage.cookieBool("toast_auto_hide",!0),s=JstStorage.cookieInt("toast_delay",3),window.JstToast.show(t,i,e,null,s),JstStorage.unsetCookie("toast_msg"),JstStorage.unsetCookie("toast_type"),JstStorage.unsetCookie("toast_auto_hide"),JstStorage.unsetCookie("toast_delay"))})})();class Shomoy{#datetime;constructor(t=new Date){t instanceof Date?this.#datetime=new Date(t.toISOString()):t instanceof Shomoy?this.#datetime=new Date(t.iso()):"string"===jQuery.type(t)||"number"===jQuery.type(t)?this.#datetime=new Date(t):new Error("Invalid time value was passed")}shomoyStart(){return new Date(this.iso()).setHours(0,0,0,0)}shomoyEnd(){return this.shomoyStart()-1+Shomoy.msInDay(1)}compare(t){var e;if(t instanceof Shomoy)return(e=this.datetime.valueOf())<(t=t.dateTime.valueOf())?-1:t<e?1:0;throw new Error("Argument must be an instance of shomoy.")}diff(t,e=!0){if(t instanceof Shomoy)return e?this.getMilliseconds()-t.getMilliseconds():this.getTimestamp()-t.getTimestamp();throw new Error("Argument must be an instance of shomoy.")}diffHour(t){if(t instanceof Shomoy)return this.diff(t,!1)/3600;throw new Error("Argument must be an instance of shomoy.")}diffCompo(t){if(!(t instanceof Shomoy))throw new Error("Argument must be an instance of shomoy.");var t=this.diff(t,!1)/86400,e=~~t,t=t%1*24,s=~~t,t=t%1*60;let i=~~t,a=t%1*60;return 60===Math.round(a)&&(a=0,i+=1),[a,i,s,e]}addMs(t){return t=this.datetime.getMilliseconds()+t,this.datetime.setMilliseconds(t),this}addSec(t){return t=this.datetime.getSeconds()+t,this.datetime.setSeconds(t),this}addMin(t){return t=this.datetime.getMinutes()+t,this.datetime.setMinutes(t),this}addHour(t){return t=this.datetime.getHours()+t,this.datetime.setHours(t),this}addDay(t){return t=this.datetime.getDate()+t,this.datetime.setDate(t),this}addMonth(t){return t=this.datetime.getMonth()+t,this.datetime.setMonth(t),this}addYear(t){return t=this.year()+t,this.datetime.setFullYear(t),this}iso(){return`${this.year()}-${this.month()}-${this.date()} ${this.hour()}:${this.min()}:`+this.sec()}toString(){return this.iso()}isoDate(){return this.iso().slice(0,10)}isoTime(){return`${this.hour()}:${this.min()}:`+this.sec()}getMilliseconds(){return this.datetime.getTime()}getTimestamp(){return this.getMilliseconds()/1e3}getDate=()=>this.#datetime.getDate();getMonth=()=>this.#datetime.getMonth();getYear=()=>this.#datetime.getFullYear();getDay=()=>this.#datetime.getDay();getHours=()=>this.#datetime.getHours();getMinutes=()=>this.#datetime.getMinutes();getSeconds=()=>this.#datetime.getSeconds();setYear=t=>(this.#datetime.setYear(t),this);setMonth=t=>(this.#datetime.setMonth(t),this);setDate=t=>(this.#datetime.setDate(t),this);setHour=t=>(this.#datetime.setHours(t),this);setMin=t=>(this.#datetime.setMinutes(t),this);setSec=t=>(this.#datetime.setSeconds(t),this);setMilli=t=>(this.#datetime.setMilliseconds(t),this);valueOf=()=>this.#datetime.valueOf();hour(t=!0,e=!0){let s=this.datetime.getHours();return t||(s=0===(s%=12)?12:s),e?JstNum.lead0(s):s}min(t=!0){var e=this.datetime.getMinutes();return t?JstNum.lead0(e):e}sec(t=!0){var e=this.datetime.getSeconds();return t?JstNum.lead0(e):e}year(){return this.datetime.getFullYear()}month(t=!0){var e=this.datetime.getMonth()+1;return t?JstNum.lead0(e):e}date(t=!0){var e=this.datetime.getDate();return t?JstNum.lead0(e):e}day(t=!0){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][this.datetime.getDay()];return t?e.slice(0,3):e}monthStr(t=!0){var e=["January","February","March","April","May","June","July","August","September","October","November","December"][this.month()-1];return t?e.slice(0,3):e}ampm(t=!0){var e=this.datetime.getHours()+1;return 12<=e&&e<=23?t?"PM":"pm":t?"AM":"am"}strTime24(t=!0){return t?`${this.hour()}:${this.min()}:`+this.sec():this.hour()+":"+this.min()}strTime(t=!0,e=!0,s=!0){return t?e?`${this.hour(!1)}:${this.min()}:${this.sec()} `+this.ampm(s):`${this.hour(!1)}:${this.min()}:`+this.sec():e?`${this.hour(!1)}:${this.min()} `+this.ampm(s):this.hour(!1)+":"+this.min()}strDate(t=!1){return t?`${this.date()}-${this.month()}-`+this.year():`${this.date()} ${this.monthStr(!0)}, `+this.year()}strDateTime(){return`${this.date()} ${this.monthStr()} ${this.year()}, ${this.hour()}:`+this.min()}get datetime(){return this.#datetime}static isoNow=()=>(new Shomoy).iso();static secInMin(t){return 60*t}static secInHour(t){return 3600*t}static secInDay(t){return 86400*t}static msInDay(t){return 864e5*t}static isoDate(){return(new Shomoy).isoDate()}static isoTime(){return(new Shomoy).isoTime()}static clone(t){if(!t instanceof Shomoy)throw new Error("Argument must be instance of Shomoy.");return new Shomoy(t)}static firstDayOfMonth(t,e){var s=new Shomoy;return Number.isSafeInteger(e)||(e=s.getYear()),t=Number.isSafeInteger(t)?t-1:s.getMonth(),s.setYear(e).setMonth(t).setDate(1).setHour(0).setMin(0).setSec(0).setMilli(0),s.datetime}static lastDayOfMonth(t,e){var s=new Shomoy;return Number.isSafeInteger(e)||(e=s.getYear()),t=Number.isSafeInteger(t)?t-1:s.getMonth(),s.setYear(e).setMonth(t+1).setDate(0).setHour(0).setMin(0).setSec(0).setMilli(0),s.datetime}static listWeek(t=[],e=[],s=null,i=null){var a=i||Shomoy.#valDecorator,r=s||Shomoy.#weekKeyDecorator,o=[],i=new Date,s=Number.isSafeInteger(e[0])?e[0]-1:i.getMonth()+1,e=e[1]||i.getFullYear(),n=Number.isSafeInteger(t[0])?t[0]-1:i.getMonth(),t=t[1]||i.getFullYear(),h=new Shomoy(Shomoy.firstDayOfMonth(s,e)).addSec(-1).valueOf(),l=new Shomoy(Shomoy.firstDayOfMonth(n,t)),i=l.getDay();for(1!==i&&l.addDay(0===i?1:8-i);!(h<=l.valueOf());){var d=Shomoy.clone(l),c=(d.addDay(7).addSec(-1),{});c[r(l,d)]=a(l,d),o.push(c),l.addDay(7)}return o}static listMonth(t=[],e=[],s=null,i=null){for(var a=new Date,r=Number.isSafeInteger(t[0])?t[0]-1:a.getMonth(),t=t[1]||a.getFullYear(),o=Number.isSafeInteger(e[0])?e[0]-1:a.getMonth(),e=e[1]||a.getFullYear(),n=new Shomoy(Shomoy.lastDayOfMonth(o,e)).addHour(24).addSec(-1).valueOf(),h=new Shomoy,l=(h.setMonth(r),h.setYear(t),i||Shomoy.#valDecorator),d=s||Shomoy.#dayKeyDecorator,c=[];;){var u=new Shomoy(Shomoy.firstDayOfMonth(h.getMonth(),h.getYear())),m=new Shomoy(Shomoy.lastDayOfMonth(h.getMonth(),h.getYear())).addHour(24).addSec(-1),p=(u.valueOf(),m.valueOf());if(n<p)break;p={};p[d(h)]=l(u,m),c.push(p),h.addMonth(1)}return c}addToNow(t=0,e=0,s=0,i=0){if(Number.isNaN(i)||Number.isNaN(s)||Number.isNaN(e)||Number.isNaN(t))throw new Error("Make sure day, hour and minute are of type number.");let a=(new Date).valueOf();return 0!==t&&(a+=t),0!==e&&(a+=60*e),0!==s&&(a+=60*s*60),0!==i&&(a+=24*i*60*60),a}static#valDecorator(t,e){return[t.getTimestamp(),e.getTimestamp()]}static#weekKeyDecorator(t,e){var s=t.getMonth()!==e.getMonth()?t.monthStr()+"-"+e.monthStr():""+t.monthStr(),i=t.getYear()!==e.getYear()?t.year()+"-"+e.year():""+t.year();return`${t.date()}-${e.date()} ${s}, `+i}static#dayKeyDecorator(t){return t.monthStr()+" "+t.year()}}
//# sourceMappingURL=jst-min.js.map
